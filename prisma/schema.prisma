generator kysely_crud {
  provider = "ts-node ./src/db/prisma-schema-to-db-types.ts"
  output   = "../src/db/db.types.ts"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum UserStatus {
  Active
  Inactive
  Pending
}

model User {
  id                      String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  first_name              String
  last_name               String
  email                   String     @unique
  password                String
  avatar_image_url        String?
  avatar_image_bucket_key String?
  is_soft_deleted         Boolean    @default(false)
  created_at              DateTime   @default(now())
  deleted_at              DateTime?
  status                  UserStatus @default(Active)
  deleted_by              String?    @db.Uuid

  deletedBy    User?  @relation("DeletedByUser", fields: [deleted_by], references: [id])
  deletedUsers User[] @relation("DeletedByUser")

  @@map("users")
}
